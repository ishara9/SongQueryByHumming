import time
import numpy as np
import simpleaudio as sa

from pysinewave import SineWave


def play_note(sinewave, freq, duration):
    # Create a sine wave, with a starting pitch of 12, and a pitch change speed of 10/second.
    sinewave.set_frequency(frequency=freq)
    # Turn the sine wave on.
    sinewave.play()
    time.sleep(duration)


def play_notes(notes):
    sinewave = SineWave(pitch=0, pitch_per_second=500)
    for freq in notes:
        play_note(sinewave, freq, 0.08)


def play_sound_simple_audio(frequency, seconds, fs=44100):
    # frequency = 440  # Our played note will be 440 Hz
    # fs = 44100  # 44100 samples per second
    # seconds = 3  # Note duration of 3 seconds

    # Generate array with seconds*sample_rate steps, ranging between 0 and seconds
    t = np.linspace(0., seconds, int(seconds * fs))

    # Generate a 440 Hz sine wave
    note = np.sin(frequency * t * 2 * np.pi)

    # Ensure that highest value is in 16-bit range
    audio = note * (2 ** 15 - 1) / np.max(np.abs(note))
    # Convert to 16-bit data
    audio = audio.astype(np.int16)

    # Start playback
    play_obj = sa.play_buffer(audio, 1, 2, fs)

    # Wait for playback to finish before exiting
    play_obj.wait_done()


adara_mal_song = [10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 168.42105263157896, 163.26530612244898,
                  135.59322033898306, 122.13740458015268, 129.03225806451613, 135.59322033898306, 133.33333333333334,
                  129.03225806451613, 10, 10, 10, 10, 10, 10, 125.98425196850394, 129.03225806451613,
                  134.45378151260505, 133.33333333333334, 10, 10, 10, 155.3398058252427, 153.84615384615384,
                  149.53271028037383, 149.53271028037383, 150.9433962264151, 148.14814814814815, 149.53271028037383,
                  155.3398058252427, 156.86274509803923, 155.3398058252427, 152.38095238095238, 155.3398058252427,
                  153.84615384615384, 10, 195.1219512195122, 192.7710843373494, 195.1219512195122, 200.0,
                  192.7710843373494, 170.2127659574468, 172.04301075268816, 177.77777777777777, 177.77777777777777,
                  177.77777777777777, 177.77777777777777, 170.2127659574468, 172.04301075268816, 172.04301075268816,
                  173.91304347826087, 177.77777777777777, 175.82417582417582, 172.04301075268816, 172.04301075268816,
                  175.82417582417582, 177.77777777777777, 179.77528089887642, 175.82417582417582, 175.82417582417582,
                  175.82417582417582, 163.26530612244898, 149.53271028037383, 160.0, 161.6161616161616,
                  156.86274509803923, 155.3398058252427, 148.14814814814815, 139.1304347826087, 145.45454545454547,
                  148.14814814814815, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 148.14814814814815, 136.75213675213675,
                  125.0, 119.40298507462687, 114.28571428571429, 113.47517730496453, 117.6470588235294, 128.0,
                  137.93103448275863, 135.59322033898306, 137.93103448275863, 136.75213675213675, 136.75213675213675,
                  140.35087719298247, 146.78899082568807, 149.53271028037383, 146.78899082568807, 148.14814814814815,
                  149.53271028037383, 142.85714285714286, 125.98425196850394, 116.78832116788321, 115.94202898550725,
                  10, 10, 10, 10, 133.33333333333334, 133.33333333333334, 135.59322033898306, 136.75213675213675,
                  134.45378151260505, 141.5929203539823, 152.38095238095238, 150.9433962264151, 149.53271028037383,
                  150.9433962264151, 150.9433962264151, 137.93103448275863, 122.13740458015268, 10, 10, 10, 10, 10,
                  133.33333333333334, 133.33333333333334, 135.59322033898306, 136.75213675213675, 136.75213675213675,
                  134.45378151260505, 136.75213675213675, 136.75213675213675, 135.59322033898306, 135.59322033898306,
                  134.45378151260505, 137.93103448275863, 137.93103448275863, 135.59322033898306, 134.45378151260505,
                  10, 10, 10, 10, 50]

play_notes(adara_mal_song)
# for freq in adara_mal_song:
#     play_sound_simple_audio(freq, 0.4)
